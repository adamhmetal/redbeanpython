# Hybrid mode

RedBeanPython and SQLAlchemy can be mixed together in one project. **Hybrid Mode** is the simultaneous usage of RedBeanPython and SQLAlchemy.

It is as easy as everything else in RedBeanPython. Just use the SQLAlchemy session (from `redbean.session_maker`) and work with SQLAlchemy models created automatically for you.

Like:

```python
from sqlalchemy import func

from redbean.models.customer import Customer
from redbean.models.invoice import Invoice

session = redbean.session_maker() # (1)
query = session.query(Customer, Invoice) # (2)
query = query.filter(Customer.id == Invoice.customer_id)
query = query.filter(Invoice.amount > 10)
result = query.all()
for customer, invoice in result:
    print(customer.name, invoice.amount)

query = session.query(
    Invoice.customer_id,
    func.count('*').label('amount'), # (3)
    func.sum(Invoice.amount).label('amount'),
)
query = query.group_by(Invoice.customer_id)
for customer_id, invoices_count, invoices_total, in query.all():
    print(f"{customer_id} has: {invoices_count} invoices with a sum: {invoices_total}")
```

1. Get SQLAlchemy session from redbean (single point of initialization)
2. Use autogenerated (by redbean) SQLAlchemy model
3. Use any SQLAlchemy feature you want

You can freely mix RedBeanPython and SQLAlchemy in one project. 

The idea of RedBeanPython is to reduce the time-to-market of your project as much as possible. However, it is not intended to replace every advanced SQLAlchemy feature. Instead, the idea is to leave the full power of advanced SQLAlchemy whenever needed.  

That way, you can work mix both usages as you prefer:

- You can use RedBeanPython as only ORM forever.
- You can start with RedBeanPython and switch to SQLAlchemy when the project matures. 
- You can use RedBeanPython for simple tasks and SQLAlchemy for complex ones.
- You can use RedBeanPython for prototyping and rewrite to SQLAlchemy before production.
- You can use RedBeanPython just for auto-creating models, migrations and on-the-fly database structure modifications by using SQLAlchemy syntax from the beginning.
- And any other mix you want.

#
# ___