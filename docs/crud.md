# CRUD

# Create

Use `redbean.store(bean)` to store the bean in the database.

```python
user = Bean('user')
user.name = "Adam"
user.age = 42
redbean.store(user)
```

By default, id is an autogenerated UUID4 string.
```python
print(user.id)
```
```bash
757dc644-f1e2-4d1a-b44e-829b62d8d4ae
```

Optionally id can be overridden.

```python
user = Bean('user')
user.id = "my_own_id_1234"
user.name = "Adam"
user.age = 42
redbean.store(user)
```

If a user with a given id already exists in the database, it will be updated.

:information: `store()` operation is idempotent. No exception will be thrown if a bean with a given ID already exists in the database.

### An alternative way to create beans is to use the `dispense` method on engine object


```python
user = redbean.dispense('user')
user['name'] = "Adam"
user['age'] = 42
```


### Create many

Use `Beans()` syntactic sugar notation to dispense many beans at once.

```python
users = Beans('user', count=10) # (1)
# ... fill beans with data...
redbean.store_many(users)

users = Beans('user', data=[{"name": "Adam"}, {"name": "Eve"}]) # (2)
redbean.store_many(users)
```

1. will dispense ten empty beans
2. will dispense beans from the list of dict data

### An alternative syntax is to use `dispense_many` method

```python
users = redbean.dispense_many('user', count=10) #(1)
# ... fill beans with data...
redbean.store_many(users)

users = redbean.dispense_many('user', data=[{"name": "Adam"}, {"name": "Eve"}]) #(2)
redbean.store_many(users)
```

1. will dispense ten empty beans
2. will dispense beans from the list of dict data

:warning: `store_many` is a syntactic sugar only. It will not store records in bulk. It will be enough for most situations, but if you need to speed up storing many records at once, use [Bulk operations](bulk_operations.md)

# Read

```python
user = redbean.load('user', user_id)
```

If a bean with a given id does not exist in the database, it will be created by default.

Optionally, it may be called with `throw_on_empty=True` to throw `NotExistsError` if a bean with a given id does not exist in the database.
```python
from redbeanpython import NotExistsError

try:
    user = redbean.load('user', user_id, throw_on_empty=True)
except NotExistsError:
    ...
```

## Load many

To load many beans at once, use `load_many` method of the redbean object

```python
users = redbean.load_many('user', [user_id_1, user_id_2, user_id_3])

users = redbean.load_many(
    'user',
    [user_id_1, user_id_2, user_id_3],
    throw_on_empty=True,
)
```

:warning: `load_many` is a syntactic sugar only. It will not load records in bulk. It will be enough for most situations, but if you need to speed up loading many records at once, use [Bulk operations](bulk_operations.md)

# Update

```python
user = redbean.load('user', user_id)
user.name = "New name"
redbean.store(user)
```

## Update many

Check [create many](#create-many) section for more details.

# Delete

We can delete loaded bean:

```python
user = redbean.load('user', user_id)
redbean.delete(bean=user)
```

or we can delete without loading bean via id and type:

```python
redbean.delete(bean_type='user', bean_id=user_id)
```

:information: `delete()` operation is idempotent. No exception will be thrown if a bean with the given ID does not exist in the database.

#
# ___